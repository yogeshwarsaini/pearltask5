{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import sendmailFactory, { Options, MailInput } from 'sendmail';\n\ninterface Settings {\n  defaultFrom: string;\n  defaultReplyTo: string;\n}\n\ninterface SendOptions {\n  from?: string;\n  to: string;\n  cc: string;\n  bcc: string;\n  replyTo?: string;\n  subject: string;\n  text: string;\n  html: string;\n  [key: string]: unknown;\n}\n\ntype ProviderOptions = Options;\n\nexport default {\n  init(providerOptions: ProviderOptions, settings: Settings) {\n    const sendmail = sendmailFactory({\n      silent: true,\n      ...providerOptions,\n    });\n\n    return {\n      send(options: SendOptions): Promise<void> {\n        return new Promise((resolve, reject) => {\n          const { from, to, cc, bcc, replyTo, subject, text, html, ...rest } = options;\n\n          const msg: MailInput = {\n            from: from || settings.defaultFrom,\n            to,\n            cc,\n            bcc,\n            replyTo: replyTo || settings.defaultReplyTo,\n            subject,\n            text,\n            html,\n            ...rest,\n          };\n\n          sendmail(msg, (err) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        });\n      },\n    };\n  },\n};\n"],"names":["init","providerOptions","settings","sendmail","sendmailFactory","silent","send","options","Promise","resolve","reject","from","to","cc","bcc","replyTo","subject","text","html","rest","msg","defaultFrom","defaultReplyTo","err"],"mappings":";;AAqBA,YAAe;IACbA,IAAKC,CAAAA,CAAAA,eAAgC,EAAEC,QAAkB,EAAA;AACvD,QAAA,MAAMC,WAAWC,eAAgB,CAAA;YAC/BC,MAAQ,EAAA,IAAA;AACR,YAAA,GAAGJ;AACL,SAAA,CAAA;QAEA,OAAO;AACLK,YAAAA,IAAAA,CAAAA,CAAKC,OAAoB,EAAA;gBACvB,OAAO,IAAIC,OAAQ,CAAA,CAACC,OAASC,EAAAA,MAAAA,GAAAA;AAC3B,oBAAA,MAAM,EAAEC,IAAI,EAAEC,EAAE,EAAEC,EAAE,EAAEC,GAAG,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAE,GAAGC,MAAM,GAAGZ,OAAAA;AAErE,oBAAA,MAAMa,GAAiB,GAAA;wBACrBT,IAAMA,EAAAA,IAAAA,IAAQT,SAASmB,WAAW;AAClCT,wBAAAA,EAAAA;AACAC,wBAAAA,EAAAA;AACAC,wBAAAA,GAAAA;wBACAC,OAASA,EAAAA,OAAAA,IAAWb,SAASoB,cAAc;AAC3CN,wBAAAA,OAAAA;AACAC,wBAAAA,IAAAA;AACAC,wBAAAA,IAAAA;AACA,wBAAA,GAAGC;AACL,qBAAA;AAEAhB,oBAAAA,QAAAA,CAASiB,KAAK,CAACG,GAAAA,GAAAA;AACb,wBAAA,IAAIA,GAAK,EAAA;4BACPb,MAAOa,CAAAA,GAAAA,CAAAA;yBACF,MAAA;AACLd,4BAAAA,OAAAA,EAAAA;AACF;AACF,qBAAA,CAAA;AACF,iBAAA,CAAA;AACF;AACF,SAAA;AACF;AACF,CAAE;;;;"}