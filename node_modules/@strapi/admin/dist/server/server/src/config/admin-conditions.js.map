{"version":3,"file":"admin-conditions.js","sources":["../../../../../server/src/config/admin-conditions.ts"],"sourcesContent":["// TODO: TS User and role type\ntype User = any;\ntype Role = any;\n\nexport const conditions = [\n  {\n    displayName: 'Is creator',\n    name: 'is-creator',\n    plugin: 'admin',\n    handler: (user: User) => ({ 'createdBy.id': user.id }),\n  },\n  {\n    displayName: 'Has same role as creator',\n    name: 'has-same-role-as-creator',\n    plugin: 'admin',\n    handler: (user: User) => ({\n      'createdBy.roles': {\n        $elemMatch: {\n          id: {\n            $in: user.roles.map((r: Role) => r.id),\n          },\n        },\n      },\n    }),\n  },\n];\n\nexport default {\n  conditions,\n};\n"],"names":["conditions","displayName","name","plugin","handler","user","id","$elemMatch","$in","roles","map","r"],"mappings":";;;;AAAA;MAIaA,UAAa,GAAA;AACxB,IAAA;QACEC,WAAa,EAAA,YAAA;QACbC,IAAM,EAAA,YAAA;QACNC,MAAQ,EAAA,OAAA;QACRC,OAAS,EAAA,CAACC,QAAgB;AAAE,gBAAA,cAAA,EAAgBA,KAAKC;aAAG;AACtD,KAAA;AACA,IAAA;QACEL,WAAa,EAAA,0BAAA;QACbC,IAAM,EAAA,0BAAA;QACNC,MAAQ,EAAA,OAAA;QACRC,OAAS,EAAA,CAACC,QAAgB;gBACxB,iBAAmB,EAAA;oBACjBE,UAAY,EAAA;wBACVD,EAAI,EAAA;4BACFE,GAAKH,EAAAA,IAAAA,CAAKI,KAAK,CAACC,GAAG,CAAC,CAACC,CAAAA,GAAYA,EAAEL,EAAE;AACvC;AACF;AACF;aACF;AACF;;AAGF,sBAAe;AACbN,IAAAA;AACF,CAAE;;;;;"}