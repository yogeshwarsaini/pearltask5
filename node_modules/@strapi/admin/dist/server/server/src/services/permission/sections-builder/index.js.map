{"version":3,"file":"index.js","sources":["../../../../../../../server/src/services/permission/sections-builder/index.ts"],"sourcesContent":["import { propEq } from 'lodash/fp';\nimport createSectionBuilder from './builder';\nimport {\n  subjectsHandlerFor,\n  contentTypesBase,\n  fieldsProperty,\n  plugins as pluginsHandler,\n  settings as settingsHandler,\n} from './handlers';\n\nconst sectionPropMatcher = propEq('section');\n\nconst createContentTypesInitialState = () => ({\n  actions: [],\n  subjects: [],\n});\n\nconst createDefaultSectionBuilder = () => {\n  const builder = createSectionBuilder();\n\n  builder.createSection('plugins', {\n    initialStateFactory: () => [],\n    handlers: [pluginsHandler],\n    matchers: [sectionPropMatcher('plugins')],\n  });\n\n  builder.createSection('settings', {\n    initialStateFactory: () => [],\n    handlers: [settingsHandler],\n    matchers: [sectionPropMatcher('settings')],\n  });\n\n  builder.createSection('singleTypes', {\n    initialStateFactory: createContentTypesInitialState,\n    handlers: [contentTypesBase, subjectsHandlerFor('singleType'), fieldsProperty],\n    matchers: [sectionPropMatcher('contentTypes')],\n  });\n\n  builder.createSection('collectionTypes', {\n    initialStateFactory: createContentTypesInitialState,\n    handlers: [contentTypesBase, subjectsHandlerFor('collectionType'), fieldsProperty],\n    matchers: [sectionPropMatcher('contentTypes')],\n  });\n\n  return builder;\n};\n\nexport default createDefaultSectionBuilder;\n"],"names":["sectionPropMatcher","propEq","createContentTypesInitialState","actions","subjects","createDefaultSectionBuilder","builder","createSectionBuilder","createSection","initialStateFactory","handlers","pluginsHandler","matchers","settingsHandler","contentTypesBase","subjectsHandlerFor","fieldsProperty"],"mappings":";;;;;;AAUA,MAAMA,qBAAqBC,SAAO,CAAA,SAAA,CAAA;AAElC,MAAMC,8BAAAA,GAAiC,KAAO;AAC5CC,QAAAA,OAAAA,EAAS,EAAE;AACXC,QAAAA,QAAAA,EAAU;KACZ,CAAA;AAEA,MAAMC,2BAA8B,GAAA,IAAA;AAClC,IAAA,MAAMC,SAAUC,GAAAA,OAAAA,EAAAA;IAEhBD,SAAQE,CAAAA,aAAa,CAAC,SAAW,EAAA;AAC/BC,QAAAA,mBAAAA,EAAqB,IAAM,EAAE;QAC7BC,QAAU,EAAA;AAACC,YAAAA;AAAe,SAAA;QAC1BC,QAAU,EAAA;YAACZ,kBAAmB,CAAA,SAAA;AAAW;AAC3C,KAAA,CAAA;IAEAM,SAAQE,CAAAA,aAAa,CAAC,UAAY,EAAA;AAChCC,QAAAA,mBAAAA,EAAqB,IAAM,EAAE;QAC7BC,QAAU,EAAA;AAACG,YAAAA;AAAgB,SAAA;QAC3BD,QAAU,EAAA;YAACZ,kBAAmB,CAAA,UAAA;AAAY;AAC5C,KAAA,CAAA;IAEAM,SAAQE,CAAAA,aAAa,CAAC,aAAe,EAAA;QACnCC,mBAAqBP,EAAAA,8BAAAA;QACrBQ,QAAU,EAAA;AAACI,YAAAA,yBAAAA;YAAkBC,2BAAmB,CAAA,YAAA,CAAA;AAAeC,YAAAA;AAAe,SAAA;QAC9EJ,QAAU,EAAA;YAACZ,kBAAmB,CAAA,cAAA;AAAgB;AAChD,KAAA,CAAA;IAEAM,SAAQE,CAAAA,aAAa,CAAC,iBAAmB,EAAA;QACvCC,mBAAqBP,EAAAA,8BAAAA;QACrBQ,QAAU,EAAA;AAACI,YAAAA,yBAAAA;YAAkBC,2BAAmB,CAAA,gBAAA,CAAA;AAAmBC,YAAAA;AAAe,SAAA;QAClFJ,QAAU,EAAA;YAACZ,kBAAmB,CAAA,cAAA;AAAgB;AAChD,KAAA,CAAA;IAEA,OAAOM,SAAAA;AACT;;;;"}