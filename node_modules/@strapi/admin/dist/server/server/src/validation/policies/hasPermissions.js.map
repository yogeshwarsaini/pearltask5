{"version":3,"file":"hasPermissions.js","sources":["../../../../../../server/src/validation/policies/hasPermissions.ts"],"sourcesContent":["import _ from 'lodash';\nimport { yup, validateYupSchema } from '@strapi/utils';\n\nconst hasPermissionsSchema = yup.object({\n  actions: yup.array().of(\n    // @ts-expect-error yup types\n    yup.lazy((val) => {\n      if (_.isArray(val)) {\n        return yup.array().of(yup.string()).min(1).max(2);\n      }\n\n      if (_.isString(val)) {\n        return yup.string().required();\n      }\n\n      return yup.object().shape({\n        action: yup.string().required(),\n        subject: yup.string(),\n      });\n    })\n  ),\n});\n\nexport const validateHasPermissionsInput = validateYupSchema(hasPermissionsSchema);\n\nexport default {\n  validateHasPermissionsInput,\n};\n"],"names":["hasPermissionsSchema","yup","object","actions","array","of","lazy","val","_","isArray","string","min","max","isString","required","shape","action","subject","validateHasPermissionsInput","validateYupSchema"],"mappings":";;;;;AAGA,MAAMA,oBAAAA,GAAuBC,SAAIC,CAAAA,MAAM,CAAC;AACtCC,IAAAA,OAAAA,EAASF,SAAIG,CAAAA,KAAK,EAAGC,CAAAA,EAAE;IAErBJ,SAAIK,CAAAA,IAAI,CAAC,CAACC,GAAAA,GAAAA;QACR,IAAIC,CAAAA,CAAEC,OAAO,CAACF,GAAM,CAAA,EAAA;AAClB,YAAA,OAAON,SAAIG,CAAAA,KAAK,EAAGC,CAAAA,EAAE,CAACJ,SAAAA,CAAIS,MAAM,EAAA,CAAA,CAAIC,GAAG,CAAC,CAAGC,CAAAA,CAAAA,GAAG,CAAC,CAAA,CAAA;AACjD;QAEA,IAAIJ,CAAAA,CAAEK,QAAQ,CAACN,GAAM,CAAA,EAAA;YACnB,OAAON,SAAAA,CAAIS,MAAM,EAAA,CAAGI,QAAQ,EAAA;AAC9B;AAEA,QAAA,OAAOb,SAAIC,CAAAA,MAAM,EAAGa,CAAAA,KAAK,CAAC;YACxBC,MAAQf,EAAAA,SAAAA,CAAIS,MAAM,EAAA,CAAGI,QAAQ,EAAA;AAC7BG,YAAAA,OAAAA,EAAShB,UAAIS,MAAM;AACrB,SAAA,CAAA;AACF,KAAA,CAAA;AAEJ,CAAA,CAAA;AAEO,MAAMQ,2BAA8BC,GAAAA,uBAAAA,CAAkBnB,oBAAsB;;;;"}