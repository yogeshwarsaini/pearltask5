{"version":3,"file":"authentication.mjs","sources":["../../../../../../ee/server/src/validation/authentication.ts"],"sourcesContent":["import { yup, validateYupSchema } from '@strapi/utils';\n\nconst providerOptionsUpdateSchema = yup.object().shape({\n  autoRegister: yup.boolean().required(),\n  defaultRole: yup\n    .strapiID()\n    .when('autoRegister', (value, initSchema) => {\n      return value ? initSchema.required() : initSchema.nullable();\n    })\n    .test('is-valid-role', 'You must submit a valid default role', (roleId) => {\n      if (roleId === null) {\n        return true;\n      }\n      return strapi.service('admin::role').exists({ id: roleId });\n    }),\n  ssoLockedRoles: yup\n    .array()\n    .nullable()\n    .of(\n      yup\n        .strapiID()\n        .test(\n          'is-valid-role',\n          'You must submit a valid role for the SSO Locked roles',\n          (roleId) => {\n            return strapi.service('admin::role').exists({ id: roleId });\n          }\n        )\n    ),\n});\n\nexport const validateProviderOptionsUpdate = validateYupSchema(providerOptionsUpdateSchema);\n\nexport default {\n  validateProviderOptionsUpdate,\n};\n"],"names":["providerOptionsUpdateSchema","yup","object","shape","autoRegister","boolean","required","defaultRole","strapiID","when","value","initSchema","nullable","test","roleId","strapi","service","exists","id","ssoLockedRoles","array","of","validateProviderOptionsUpdate","validateYupSchema"],"mappings":";;AAEA,MAAMA,2BAA8BC,GAAAA,GAAAA,CAAIC,MAAM,EAAA,CAAGC,KAAK,CAAC;IACrDC,YAAcH,EAAAA,GAAAA,CAAII,OAAO,EAAA,CAAGC,QAAQ,EAAA;AACpCC,IAAAA,WAAAA,EAAaN,IACVO,QAAQ,EAAA,CACRC,IAAI,CAAC,cAAA,EAAgB,CAACC,KAAOC,EAAAA,UAAAA,GAAAA;AAC5B,QAAA,OAAOD,KAAQC,GAAAA,UAAAA,CAAWL,QAAQ,EAAA,GAAKK,WAAWC,QAAQ,EAAA;AAC5D,KAAA,CAAA,CACCC,IAAI,CAAC,eAAiB,EAAA,sCAAA,EAAwC,CAACC,MAAAA,GAAAA;AAC9D,QAAA,IAAIA,WAAW,IAAM,EAAA;YACnB,OAAO,IAAA;AACT;AACA,QAAA,OAAOC,MAAOC,CAAAA,OAAO,CAAC,aAAA,CAAA,CAAeC,MAAM,CAAC;YAAEC,EAAIJ,EAAAA;AAAO,SAAA,CAAA;AAC3D,KAAA,CAAA;AACFK,IAAAA,cAAAA,EAAgBlB,GACbmB,CAAAA,KAAK,EACLR,CAAAA,QAAQ,GACRS,EAAE,CACDpB,GACGO,CAAAA,QAAQ,EACRK,CAAAA,IAAI,CACH,eAAA,EACA,yDACA,CAACC,MAAAA,GAAAA;AACC,QAAA,OAAOC,MAAOC,CAAAA,OAAO,CAAC,aAAA,CAAA,CAAeC,MAAM,CAAC;YAAEC,EAAIJ,EAAAA;AAAO,SAAA,CAAA;AAC3D,KAAA,CAAA;AAGV,CAAA,CAAA;AAEO,MAAMQ,6BAAgCC,GAAAA,iBAAAA,CAAkBvB,2BAA6B;;;;"}