{"version":3,"file":"AuthResponse.js","sources":["../../../../../../ee/admin/src/pages/AuthResponse.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { useIntl } from 'react-intl';\nimport { useNavigate, useMatch } from 'react-router-dom';\n\nimport { Page } from '../../../../admin/src/components/PageHelpers';\nimport { useTypedDispatch } from '../../../../admin/src/core/store/hooks';\nimport { login } from '../../../../admin/src/reducer';\nimport { getCookieValue } from '../../../../admin/src/utils/cookies';\n\nconst AuthResponse = () => {\n  const match = useMatch('/auth/login/:authResponse');\n  const { formatMessage } = useIntl();\n  const navigate = useNavigate();\n  const dispatch = useTypedDispatch();\n\n  const redirectToOops = React.useCallback(() => {\n    navigate({\n      pathname: '/auth/oops',\n      search: `?info=${encodeURIComponent(\n        formatMessage({\n          id: 'Auth.form.button.login.providers.error',\n          defaultMessage: 'We cannot connect you through the selected provider.',\n        })\n      )}`,\n    });\n  }, [navigate, formatMessage]);\n\n  React.useEffect(() => {\n    if (match?.params.authResponse === 'error') {\n      redirectToOops();\n    }\n\n    if (match?.params.authResponse === 'success') {\n      const jwtToken = getCookieValue('jwtToken');\n\n      if (jwtToken) {\n        dispatch(\n          login({\n            token: jwtToken,\n          })\n        );\n\n        navigate('/auth/login');\n      } else {\n        redirectToOops();\n      }\n    }\n  }, [dispatch, match, redirectToOops, navigate]);\n\n  return <Page.Loading />;\n};\n\nexport { AuthResponse };\n"],"names":["AuthResponse","match","useMatch","formatMessage","useIntl","navigate","useNavigate","dispatch","useTypedDispatch","redirectToOops","React","useCallback","pathname","search","encodeURIComponent","id","defaultMessage","useEffect","params","authResponse","jwtToken","getCookieValue","login","token","_jsx","Page","Loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAMA,YAAe,GAAA,IAAA;AACnB,IAAA,MAAMC,QAAQC,uBAAS,CAAA,2BAAA,CAAA;IACvB,MAAM,EAAEC,aAAa,EAAE,GAAGC,iBAAAA,EAAAA;AAC1B,IAAA,MAAMC,QAAWC,GAAAA,0BAAAA,EAAAA;AACjB,IAAA,MAAMC,QAAWC,GAAAA,sBAAAA,EAAAA;IAEjB,MAAMC,cAAAA,GAAiBC,gBAAMC,CAAAA,WAAW,CAAC,IAAA;QACvCN,QAAS,CAAA;YACPO,QAAU,EAAA,YAAA;AACVC,YAAAA,MAAAA,EAAQ,CAAC,MAAM,EAAEC,kBAAAA,CACfX,aAAc,CAAA;gBACZY,EAAI,EAAA,wCAAA;gBACJC,cAAgB,EAAA;AAClB,aAAA,CAAA,CAAA,CACA;AACJ,SAAA,CAAA;KACC,EAAA;AAACX,QAAAA,QAAAA;AAAUF,QAAAA;AAAc,KAAA,CAAA;AAE5BO,IAAAA,gBAAAA,CAAMO,SAAS,CAAC,IAAA;QACd,IAAIhB,KAAAA,EAAOiB,MAAOC,CAAAA,YAAAA,KAAiB,OAAS,EAAA;AAC1CV,YAAAA,cAAAA,EAAAA;AACF;QAEA,IAAIR,KAAAA,EAAOiB,MAAOC,CAAAA,YAAAA,KAAiB,SAAW,EAAA;AAC5C,YAAA,MAAMC,WAAWC,sBAAe,CAAA,UAAA,CAAA;AAEhC,YAAA,IAAID,QAAU,EAAA;AACZb,gBAAAA,QAAAA,CACEe,aAAM,CAAA;oBACJC,KAAOH,EAAAA;AACT,iBAAA,CAAA,CAAA;gBAGFf,QAAS,CAAA,aAAA,CAAA;aACJ,MAAA;AACLI,gBAAAA,cAAAA,EAAAA;AACF;AACF;KACC,EAAA;AAACF,QAAAA,QAAAA;AAAUN,QAAAA,KAAAA;AAAOQ,QAAAA,cAAAA;AAAgBJ,QAAAA;AAAS,KAAA,CAAA;IAE9C,qBAAOmB,cAAA,CAACC,iBAAKC,OAAO,EAAA,EAAA,CAAA;AACtB;;;;"}