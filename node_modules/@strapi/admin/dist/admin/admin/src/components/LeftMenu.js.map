{"version":3,"file":"LeftMenu.js","sources":["../../../../../admin/src/components/LeftMenu.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { Divider, Flex, FlexComponent, useCollator } from '@strapi/design-system';\nimport { Lightning } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { useAuth } from '../features/Auth';\nimport { useTracking } from '../features/Tracking';\nimport { Menu, MenuItem } from '../hooks/useMenu';\nimport { getDisplayName, getInitials } from '../utils/users';\n\nimport { MainNav } from './MainNav/MainNav';\nimport { NavBrand } from './MainNav/NavBrand';\nimport { NavLink } from './MainNav/NavLink';\nimport { NavUser } from './MainNav/NavUser';\nimport { TrialCountdown } from './MainNav/TrialCountdown';\n\nconst sortLinks = (links: MenuItem[]) => {\n  return links.sort((a, b) => {\n    // if no position is defined, we put the link in the position of the external plugins, before the plugins list\n    const positionA = a.position ?? 6;\n    const positionB = b.position ?? 6;\n\n    if (positionA < positionB) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n};\n\nconst NavLinkBadgeCounter = styled(NavLink.Badge)`\n  span {\n    color: ${({ theme }) => theme.colors.neutral0};\n  }\n`;\n\nconst NavLinkBadgeLock = styled(NavLink.Badge)`\n  background-color: transparent;\n`;\n\nconst NavListWrapper = styled<FlexComponent<'ul'>>(Flex)`\n  overflow-y: auto;\n`;\n\ninterface LeftMenuProps extends Pick<Menu, 'generalSectionLinks' | 'pluginsSectionLinks'> {}\n\nconst LeftMenu = ({ generalSectionLinks, pluginsSectionLinks }: LeftMenuProps) => {\n  const user = useAuth('AuthenticatedApp', (state) => state.user);\n  const { trackUsage } = useTracking();\n  const { pathname } = useLocation();\n  const userDisplayName = getDisplayName(user);\n  const { formatMessage, locale } = useIntl();\n  const formatter = useCollator(locale, {\n    sensitivity: 'base',\n  });\n\n  const initials = getInitials(user);\n\n  const handleClickOnLink = (destination: string) => {\n    trackUsage('willNavigate', { from: pathname, to: destination });\n  };\n\n  const listLinksAlphabeticallySorted = [...pluginsSectionLinks, ...generalSectionLinks].sort(\n    (a, b) => formatter.compare(formatMessage(a.intlLabel), formatMessage(b.intlLabel))\n  );\n  const listLinks = sortLinks(listLinksAlphabeticallySorted);\n\n  return (\n    <MainNav>\n      <NavBrand />\n\n      <Divider />\n\n      <NavListWrapper tag=\"ul\" gap={3} direction=\"column\" flex={1} paddingTop={3} paddingBottom={3}>\n        {listLinks.length > 0\n          ? listLinks.map((link) => {\n              const LinkIcon = link.icon;\n              const badgeContentLock = link?.licenseOnly ? (\n                <Lightning fill=\"primary600\" />\n              ) : undefined;\n\n              const badgeContentNumeric =\n                link.notificationsCount && link.notificationsCount > 0\n                  ? link.notificationsCount.toString()\n                  : undefined;\n\n              const labelValue = formatMessage(link.intlLabel);\n              return (\n                <Flex tag=\"li\" key={link.to}>\n                  <NavLink.Tooltip label={labelValue}>\n                    <NavLink.Link\n                      to={link.to}\n                      onClick={() => handleClickOnLink(link.to)}\n                      aria-label={labelValue}\n                    >\n                      <NavLink.Icon label={labelValue}>\n                        <LinkIcon width=\"20\" height=\"20\" fill=\"neutral500\" />\n                      </NavLink.Icon>\n                      {badgeContentLock ? (\n                        <NavLinkBadgeLock\n                          label=\"locked\"\n                          textColor=\"neutral500\"\n                          paddingLeft={0}\n                          paddingRight={0}\n                        >\n                          {badgeContentLock}\n                        </NavLinkBadgeLock>\n                      ) : badgeContentNumeric ? (\n                        <NavLinkBadgeCounter\n                          label={badgeContentNumeric}\n                          backgroundColor=\"primary600\"\n                          width=\"2.3rem\"\n                          color=\"neutral0\"\n                        >\n                          {badgeContentNumeric}\n                        </NavLinkBadgeCounter>\n                      ) : null}\n                    </NavLink.Link>\n                  </NavLink.Tooltip>\n                </Flex>\n              );\n            })\n          : null}\n      </NavListWrapper>\n      <TrialCountdown />\n      <NavUser initials={initials}>{userDisplayName}</NavUser>\n    </MainNav>\n  );\n};\n\nexport { LeftMenu };\n"],"names":["sortLinks","links","sort","a","b","positionA","position","positionB","NavLinkBadgeCounter","styled","NavLink","Badge","theme","colors","neutral0","NavLinkBadgeLock","NavListWrapper","Flex","LeftMenu","generalSectionLinks","pluginsSectionLinks","user","useAuth","state","trackUsage","useTracking","pathname","useLocation","userDisplayName","getDisplayName","formatMessage","locale","useIntl","formatter","useCollator","sensitivity","initials","getInitials","handleClickOnLink","destination","from","to","listLinksAlphabeticallySorted","compare","intlLabel","listLinks","_jsxs","MainNav","_jsx","NavBrand","Divider","tag","gap","direction","flex","paddingTop","paddingBottom","length","map","link","LinkIcon","icon","badgeContentLock","licenseOnly","Lightning","fill","undefined","badgeContentNumeric","notificationsCount","toString","labelValue","Tooltip","label","Link","onClick","aria-label","Icon","width","height","textColor","paddingLeft","paddingRight","backgroundColor","color","TrialCountdown","NavUser"],"mappings":"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"}