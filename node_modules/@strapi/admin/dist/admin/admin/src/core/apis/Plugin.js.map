{"version":3,"file":"Plugin.js","sources":["../../../../../../admin/src/core/apis/Plugin.ts"],"sourcesContent":["/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport { immerable } from 'immer';\n\nexport interface PluginConfig\n  extends Partial<Pick<Plugin, 'apis' | 'initializer' | 'injectionZones' | 'isReady'>> {\n  name: string;\n  id: string;\n}\n\nexport class Plugin {\n  [immerable] = true;\n\n  apis: Record<string, unknown>;\n  initializer: React.ComponentType<{ setPlugin(pluginId: string): void }> | null;\n  injectionZones: Record<\n    string,\n    Record<string, Array<{ name: string; Component: React.ComponentType }>>\n  >;\n  isReady: boolean;\n  name: string;\n  pluginId: PluginConfig['id'];\n\n  constructor(pluginConf: PluginConfig) {\n    this.apis = pluginConf.apis || {};\n    this.initializer = pluginConf.initializer || null;\n    this.injectionZones = pluginConf.injectionZones || {};\n    this.isReady = pluginConf.isReady !== undefined ? pluginConf.isReady : true;\n    this.name = pluginConf.name;\n    this.pluginId = pluginConf.id;\n  }\n\n  getInjectedComponents(containerName: string, blockName: string) {\n    try {\n      return this.injectionZones[containerName][blockName] || [];\n    } catch (err) {\n      console.error('Cannot get injected component', err);\n\n      return [];\n    }\n  }\n\n  injectComponent(\n    containerName: string,\n    blockName: string,\n    component: { name: string; Component: React.ComponentType }\n  ) {\n    try {\n      this.injectionZones[containerName][blockName].push(component);\n    } catch (err) {\n      console.error('Cannot inject component', err);\n    }\n  }\n}\n"],"names":["Plugin","getInjectedComponents","containerName","blockName","injectionZones","err","console","error","injectComponent","component","push","constructor","pluginConf","immerable","apis","initializer","isReady","undefined","name","pluginId","id"],"mappings":";;;;;AAWO,MAAMA,MAAAA,CAAAA;IAsBXC,qBAAsBC,CAAAA,aAAqB,EAAEC,SAAiB,EAAE;QAC9D,IAAI;YACF,OAAO,IAAI,CAACC,cAAc,CAACF,cAAc,CAACC,SAAAA,CAAU,IAAI,EAAE;AAC5D,SAAA,CAAE,OAAOE,GAAK,EAAA;YACZC,OAAQC,CAAAA,KAAK,CAAC,+BAAiCF,EAAAA,GAAAA,CAAAA;AAE/C,YAAA,OAAO,EAAE;AACX;AACF;AAEAG,IAAAA,eAAAA,CACEN,aAAqB,EACrBC,SAAiB,EACjBM,SAA2D,EAC3D;QACA,IAAI;YACF,IAAI,CAACL,cAAc,CAACF,aAAAA,CAAc,CAACC,SAAU,CAAA,CAACO,IAAI,CAACD,SAAAA,CAAAA;AACrD,SAAA,CAAE,OAAOJ,GAAK,EAAA;YACZC,OAAQC,CAAAA,KAAK,CAAC,yBAA2BF,EAAAA,GAAAA,CAAAA;AAC3C;AACF;AA7BAM,IAAAA,WAAAA,CAAYC,UAAwB,CAAE;AAZtC,QAAA,IAAA,CAACC,gBAAU,GAAG,IAAA;AAaZ,QAAA,IAAI,CAACC,IAAI,GAAGF,UAAWE,CAAAA,IAAI,IAAI,EAAC;AAChC,QAAA,IAAI,CAACC,WAAW,GAAGH,UAAAA,CAAWG,WAAW,IAAI,IAAA;AAC7C,QAAA,IAAI,CAACX,cAAc,GAAGQ,UAAWR,CAAAA,cAAc,IAAI,EAAC;QACpD,IAAI,CAACY,OAAO,GAAGJ,UAAAA,CAAWI,OAAO,KAAKC,SAAAA,GAAYL,UAAWI,CAAAA,OAAO,GAAG,IAAA;AACvE,QAAA,IAAI,CAACE,IAAI,GAAGN,UAAAA,CAAWM,IAAI;AAC3B,QAAA,IAAI,CAACC,QAAQ,GAAGP,UAAAA,CAAWQ,EAAE;AAC/B;AAuBF;;;;"}