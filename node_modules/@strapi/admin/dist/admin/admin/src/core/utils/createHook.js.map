{"version":3,"file":"createHook.js","sources":["../../../../../../admin/src/core/utils/createHook.ts"],"sourcesContent":["/* eslint-disable no-await-in-loop */\n/* eslint-disable no-restricted-syntax */\n\nimport type { Store } from '../store/configure';\n\nexport type Handler = (...args: any[]) => any;\n\nexport const createHook = () => {\n  const _handlers: Handler[] = [];\n\n  return {\n    register(fn: Handler) {\n      _handlers.push(fn);\n    },\n    delete(handler: Handler) {\n      _handlers.splice(_handlers.indexOf(handler), 1);\n    },\n    runWaterfall<T>(args: T, store?: Store) {\n      return _handlers.reduce((acc, fn) => fn(acc, store), args);\n    },\n    async runWaterfallAsync<T>(args: T, store?: Store) {\n      let result = args;\n\n      for (const fn of _handlers) {\n        result = await fn(result, store);\n      }\n\n      return result;\n    },\n    runSeries<T extends any[]>(...args: T) {\n      return _handlers.map((fn) => fn(...args));\n    },\n    async runSeriesAsync<T extends any[]>(...args: T) {\n      const result = [];\n\n      for (const fn of _handlers) {\n        result.push(await fn(...args));\n      }\n\n      return result;\n    },\n    runParallel<T extends any[]>(...args: T) {\n      return Promise.all(\n        _handlers.map((fn) => {\n          return fn(...args);\n        })\n      );\n    },\n  };\n};\n"],"names":["createHook","_handlers","register","fn","push","delete","handler","splice","indexOf","runWaterfall","args","store","reduce","acc","runWaterfallAsync","result","runSeries","map","runSeriesAsync","runParallel","Promise","all"],"mappings":";;AAAA,sFAOaA,UAAa,GAAA,IAAA;AACxB,IAAA,MAAMC,YAAuB,EAAE;IAE/B,OAAO;AACLC,QAAAA,QAAAA,CAAAA,CAASC,EAAW,EAAA;AAClBF,YAAAA,SAAAA,CAAUG,IAAI,CAACD,EAAAA,CAAAA;AACjB,SAAA;AACAE,QAAAA,MAAAA,CAAAA,CAAOC,OAAgB,EAAA;AACrBL,YAAAA,SAAAA,CAAUM,MAAM,CAACN,SAAUO,CAAAA,OAAO,CAACF,OAAU,CAAA,EAAA,CAAA,CAAA;AAC/C,SAAA;QACAG,YAAgBC,CAAAA,CAAAA,IAAO,EAAEC,KAAa,EAAA;YACpC,OAAOV,SAAAA,CAAUW,MAAM,CAAC,CAACC,KAAKV,EAAOA,GAAAA,EAAAA,CAAGU,KAAKF,KAAQD,CAAAA,EAAAA,IAAAA,CAAAA;AACvD,SAAA;QACA,MAAMI,iBAAAA,CAAAA,CAAqBJ,IAAO,EAAEC,KAAa,EAAA;AAC/C,YAAA,IAAII,MAASL,GAAAA,IAAAA;YAEb,KAAK,MAAMP,MAAMF,SAAW,CAAA;gBAC1Bc,MAAS,GAAA,MAAMZ,GAAGY,MAAQJ,EAAAA,KAAAA,CAAAA;AAC5B;YAEA,OAAOI,MAAAA;AACT,SAAA;AACAC,QAAAA,SAAAA,CAAAA,CAA2B,GAAGN,IAAO,EAAA;AACnC,YAAA,OAAOT,SAAUgB,CAAAA,GAAG,CAAC,CAACd,KAAOA,EAAMO,CAAAA,GAAAA,IAAAA,CAAAA,CAAAA;AACrC,SAAA;QACA,MAAMQ,cAAAA,CAAAA,CAAgC,GAAGR,IAAO,EAAA;AAC9C,YAAA,MAAMK,SAAS,EAAE;YAEjB,KAAK,MAAMZ,MAAMF,SAAW,CAAA;gBAC1Bc,MAAOX,CAAAA,IAAI,CAAC,MAAMD,EAAMO,CAAAA,GAAAA,IAAAA,CAAAA,CAAAA;AAC1B;YAEA,OAAOK,MAAAA;AACT,SAAA;AACAI,QAAAA,WAAAA,CAAAA,CAA6B,GAAGT,IAAO,EAAA;AACrC,YAAA,OAAOU,QAAQC,GAAG,CAChBpB,SAAUgB,CAAAA,GAAG,CAAC,CAACd,EAAAA,GAAAA;AACb,gBAAA,OAAOA,EAAMO,CAAAA,GAAAA,IAAAA,CAAAA;AACf,aAAA,CAAA,CAAA;AAEJ;AACF,KAAA;AACF;;;;"}