{"version":3,"file":"mdRenderer.mjs","sources":["../../../../../../../../admin/src/pages/EditView/components/FormInputs/Wysiwyg/utils/mdRenderer.ts"],"sourcesContent":["import { getLanguage, highlight, highlightAuto } from 'highlight.js';\nimport Markdown from 'markdown-it';\n// @ts-expect-error - library does not export types\nimport abbr from 'markdown-it-abbr';\nimport container from 'markdown-it-container';\n// @ts-expect-error - library does not export types\nimport deflist from 'markdown-it-deflist';\nimport emoji from 'markdown-it-emoji';\nimport footnote from 'markdown-it-footnote';\n// @ts-expect-error - library does not export types\nimport ins from 'markdown-it-ins';\n// @ts-expect-error - library does not export types\nimport mark from 'markdown-it-mark';\n// @ts-expect-error - library does not export types\nimport sub from 'markdown-it-sub';\n// @ts-expect-error - library does not export types\nimport sup from 'markdown-it-sup';\n\nimport 'highlight.js/styles/solarized-dark.css';\n\nconst md: Markdown = new Markdown({\n  html: true, // Enable HTML tags in source\n  xhtmlOut: false,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  // Code from: https://github.com/markdown-it/markdown-it/blob/master/support/demo_template/index.js#L83\n  highlight(str, lang) {\n    if (lang && lang !== 'auto' && getLanguage(lang)) {\n      return (\n        '<pre class=\"hljs language-' +\n        md.utils.escapeHtml(lang.toLowerCase()) +\n        '\"><code>' +\n        highlight(lang, str, true).value +\n        '</code></pre>'\n      );\n    }\n\n    if (lang === 'auto') {\n      const result = highlightAuto(str);\n\n      return (\n        '<pre class=\"hljs language-' +\n        md.utils.escapeHtml(result.language!) +\n        '\"><code>' +\n        result.value +\n        '</code></pre>'\n      );\n    }\n\n    return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n  },\n})\n  .use(abbr)\n  .use(container, 'warning')\n  .use(container, 'tip')\n  .use(deflist)\n  .use(emoji)\n  .use(footnote)\n  .use(ins)\n  .use(mark)\n  .use(sub)\n  .use(sup);\n\n// Code from: https://github.com/markdown-it/markdown-it-footnote/blob/master/index.js#L29\nmd.renderer.rules.footnote_ref = (tokens, idx, options, env, slf) => {\n  const caption = slf.rules.footnote_caption?.(tokens, idx, options, env, slf);\n\n  return '<sup class=\"footnote-ref\"><span>' + caption + '</span></sup>';\n};\n\nmd.renderer.rules.footnote_anchor = () => {\n  /* â†© with escape code to prevent display as Apple Emoji on iOS */\n  return ' <span class=\"footnote-backref\">\\u21a9\\uFE0E</span>';\n};\n\nexport { md };\n"],"names":["md","Markdown","html","xhtmlOut","breaks","langPrefix","linkify","typographer","highlight","str","lang","getLanguage","utils","escapeHtml","toLowerCase","value","result","highlightAuto","language","use","abbr","container","deflist","emoji","footnote","ins","mark","sub","sup","renderer","rules","footnote_ref","tokens","idx","options","env","slf","caption","footnote_caption","footnote_anchor"],"mappings":";;;;;;;;;;;;;AAoBMA,MAAAA,EAAAA,GAAe,IAAIC,QAAS,CAAA;IAChCC,IAAM,EAAA,IAAA;IACNC,QAAU,EAAA,KAAA;IACVC,MAAQ,EAAA,IAAA;IACRC,UAAY,EAAA,WAAA;IACZC,OAAS,EAAA,IAAA;IACTC,WAAa,EAAA,IAAA;;IAEbC,SAAUC,CAAAA,CAAAA,GAAG,EAAEC,IAAI,EAAA;AACjB,QAAA,IAAIA,IAAQA,IAAAA,IAAAA,KAAS,MAAUC,IAAAA,WAAAA,CAAYD,IAAO,CAAA,EAAA;AAChD,YAAA,OACE,4BACAV,GAAAA,EAAAA,CAAGY,KAAK,CAACC,UAAU,CAACH,IAAAA,CAAKI,WAAW,EAAA,CAAA,GACpC,aACAN,SAAUE,CAAAA,IAAAA,EAAMD,GAAK,EAAA,IAAA,CAAA,CAAMM,KAAK,GAChC,eAAA;AAEJ;AAEA,QAAA,IAAIL,SAAS,MAAQ,EAAA;AACnB,YAAA,MAAMM,SAASC,aAAcR,CAAAA,GAAAA,CAAAA;AAE7B,YAAA,OACE,4BACAT,GAAAA,EAAAA,CAAGY,KAAK,CAACC,UAAU,CAACG,MAAOE,CAAAA,QAAQ,CACnC,GAAA,UAAA,GACAF,MAAOD,CAAAA,KAAK,GACZ,eAAA;AAEJ;AAEA,QAAA,OAAO,6BAA6Bf,EAAGY,CAAAA,KAAK,CAACC,UAAU,CAACJ,GAAO,CAAA,GAAA,eAAA;AACjE;AACF,CAAA,CAAA,CACGU,GAAG,CAACC,IACJD,CAAAA,CAAAA,GAAG,CAACE,SAAAA,EAAW,SACfF,CAAAA,CAAAA,GAAG,CAACE,SAAAA,EAAW,KACfF,CAAAA,CAAAA,GAAG,CAACG,OACJH,CAAAA,CAAAA,GAAG,CAACI,KAAAA,CAAAA,CACJJ,GAAG,CAACK,QACJL,CAAAA,CAAAA,GAAG,CAACM,GAAAA,CAAAA,CACJN,GAAG,CAACO,IACJP,CAAAA,CAAAA,GAAG,CAACQ,GAAAA,CAAAA,CACJR,GAAG,CAACS,GAAAA;AAEP;AACA5B,EAAG6B,CAAAA,QAAQ,CAACC,KAAK,CAACC,YAAY,GAAG,CAACC,MAAAA,EAAQC,GAAKC,EAAAA,OAAAA,EAASC,GAAKC,EAAAA,GAAAA,GAAAA;IAC3D,MAAMC,OAAAA,GAAUD,IAAIN,KAAK,CAACQ,gBAAgB,GAAGN,MAAAA,EAAQC,GAAKC,EAAAA,OAAAA,EAASC,GAAKC,EAAAA,GAAAA,CAAAA;AAExE,IAAA,OAAO,qCAAqCC,OAAU,GAAA,eAAA;AACxD,CAAA;AAEArC,EAAAA,CAAG6B,QAAQ,CAACC,KAAK,CAACS,eAAe,GAAG,IAAA;AAClC,sEACA,OAAO,qDAAA;AACT,CAAA;;;;"}