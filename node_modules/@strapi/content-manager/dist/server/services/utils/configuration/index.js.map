{"version":3,"file":"index.js","sources":["../../../../../server/src/services/utils/configuration/index.ts"],"sourcesContent":["import { createModelConfigurationSchema } from '../../../controllers/validation';\nimport { createDefaultSettings, syncSettings } from './settings';\nimport { createDefaultMetadatas, syncMetadatas } from './metadatas';\nimport { createDefaultLayouts, syncLayouts } from './layouts';\n\nasync function validateCustomConfig(schema: any) {\n  try {\n    await createModelConfigurationSchema(schema, {\n      allowUndefined: true,\n    }).validate(schema.config);\n  } catch (error: any) {\n    throw new Error(\n      `Invalid Model configuration for model ${schema.uid}. Verify your {{ modelName }}.config.js(on) file:\\n  - ${error.message}\\n`\n    );\n  }\n}\n\nasync function createDefaultConfiguration(schema: any) {\n  await validateCustomConfig(schema);\n\n  return {\n    settings: await createDefaultSettings(schema),\n    metadatas: await createDefaultMetadatas(schema),\n    layouts: await createDefaultLayouts(schema),\n  };\n}\n\nasync function syncConfiguration(conf: any, schema: any) {\n  await validateCustomConfig(schema);\n\n  return {\n    settings: await syncSettings(conf, schema),\n    layouts: await syncLayouts(conf, schema),\n    metadatas: await syncMetadatas(conf, schema),\n  };\n}\n\nexport { createDefaultConfiguration, syncConfiguration };\n"],"names":["validateCustomConfig","schema","createModelConfigurationSchema","allowUndefined","validate","config","error","Error","uid","message","createDefaultConfiguration","settings","createDefaultSettings","metadatas","createDefaultMetadatas","layouts","createDefaultLayouts","syncConfiguration","conf","syncSettings","syncLayouts","syncMetadatas"],"mappings":";;;;;;;;AAKA,eAAeA,qBAAqBC,MAAW,EAAA;IAC7C,IAAI;AACF,QAAA,MAAMC,mBAA+BD,MAAQ,EAAA;YAC3CE,cAAgB,EAAA;SACfC,CAAAA,CAAAA,QAAQ,CAACH,MAAAA,CAAOI,MAAM,CAAA;AAC3B,KAAA,CAAE,OAAOC,KAAY,EAAA;AACnB,QAAA,MAAM,IAAIC,KAAAA,CACR,CAAC,sCAAsC,EAAEN,MAAOO,CAAAA,GAAG,CAAC,uDAAuD,EAAEF,KAAAA,CAAMG,OAAO,CAAC,EAAE,CAAC,CAAA;AAElI;AACF;AAEA,eAAeC,2BAA2BT,MAAW,EAAA;AACnD,IAAA,MAAMD,oBAAqBC,CAAAA,MAAAA,CAAAA;IAE3B,OAAO;AACLU,QAAAA,QAAAA,EAAU,MAAMC,8BAAsBX,CAAAA,MAAAA,CAAAA;AACtCY,QAAAA,SAAAA,EAAW,MAAMC,gCAAuBb,CAAAA,MAAAA,CAAAA;AACxCc,QAAAA,OAAAA,EAAS,MAAMC,4BAAqBf,CAAAA,MAAAA;AACtC,KAAA;AACF;AAEA,eAAegB,iBAAAA,CAAkBC,IAAS,EAAEjB,MAAW,EAAA;AACrD,IAAA,MAAMD,oBAAqBC,CAAAA,MAAAA,CAAAA;IAE3B,OAAO;QACLU,QAAU,EAAA,MAAMQ,sBAAaD,IAAMjB,EAAAA,MAAAA,CAAAA;QACnCc,OAAS,EAAA,MAAMK,oBAAYF,IAAMjB,EAAAA,MAAAA,CAAAA;QACjCY,SAAW,EAAA,MAAMQ,wBAAcH,IAAMjB,EAAAA,MAAAA;AACvC,KAAA;AACF;;;;;"}