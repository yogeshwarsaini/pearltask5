{"version":3,"file":"review-workflows.js","sources":["../../../server/src/routes/review-workflows.ts"],"sourcesContent":["import { enableFeatureMiddleware } from './utils';\n\nexport default {\n  type: 'admin',\n  routes: [\n    // Review workflow\n    {\n      method: 'POST',\n      path: '/workflows',\n      handler: 'workflows.create',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.create'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'PUT',\n      path: '/workflows/:id',\n      handler: 'workflows.update',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.update'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'DELETE',\n      path: '/workflows/:id',\n      handler: 'workflows.delete',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.delete'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'GET',\n      path: '/workflows',\n      handler: 'workflows.find',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.read'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'GET',\n      path: '/workflows/:workflow_id/stages',\n      handler: 'stages.find',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.read'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'GET',\n      path: '/workflows/:workflow_id/stages/:id',\n      handler: 'stages.findById',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::review-workflows.read'],\n            },\n          },\n        ],\n      },\n    },\n    {\n      method: 'PUT',\n      path: '/content-manager/(collection|single)-types/:model_uid/:id/stage',\n      handler: 'stages.updateEntity',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: ['admin::isAuthenticatedAdmin'],\n      },\n    },\n    {\n      method: 'GET',\n      path: '/content-manager/(collection|single)-types/:model_uid/:id/stages',\n      handler: 'stages.listAvailableStages',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: ['admin::isAuthenticatedAdmin'],\n      },\n    },\n    {\n      method: 'PUT',\n      path: '/content-manager/(collection|single)-types/:model_uid/:id/assignee',\n      handler: 'assignees.updateEntity',\n      config: {\n        middlewares: [enableFeatureMiddleware('review-workflows')],\n        policies: [\n          'admin::isAuthenticatedAdmin',\n          {\n            name: 'admin::hasPermissions',\n            config: {\n              actions: ['admin::users.read'],\n            },\n          },\n        ],\n      },\n    },\n  ],\n};\n"],"names":["type","routes","method","path","handler","config","middlewares","enableFeatureMiddleware","policies","name","actions"],"mappings":"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"}