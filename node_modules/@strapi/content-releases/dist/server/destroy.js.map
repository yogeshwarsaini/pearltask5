{"version":3,"file":"destroy.js","sources":["../../server/src/destroy.ts"],"sourcesContent":["import { Job } from 'node-schedule';\nimport type { Core } from '@strapi/types';\n\nimport { Release } from '../../shared/contracts/releases';\nimport { getService } from './utils';\n\nexport const destroy = async ({ strapi }: { strapi: Core.Strapi }) => {\n  const scheduledJobs: Map<Release['id'], Job> = getService('scheduling', {\n    strapi,\n  }).getAll();\n\n  for (const [, job] of scheduledJobs) {\n    job.cancel();\n  }\n};\n"],"names":["destroy","strapi","scheduledJobs","getService","getAll","job","cancel"],"mappings":";;;;AAMaA,MAAAA,OAAAA,GAAU,OAAO,EAAEC,MAAM,EAA2B,GAAA;IAC/D,MAAMC,aAAAA,GAAyCC,iBAAW,YAAc,EAAA;AACtEF,QAAAA;AACF,KAAA,CAAA,CAAGG,MAAM,EAAA;AAET,IAAA,KAAK,MAAM,GAAGC,GAAI,CAAA,IAAIH,aAAe,CAAA;AACnCG,QAAAA,GAAAA,CAAIC,MAAM,EAAA;AACZ;AACF;;;;"}