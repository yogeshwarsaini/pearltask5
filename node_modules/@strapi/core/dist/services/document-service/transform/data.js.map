{"version":3,"file":"data.js","sources":["../../../../src/services/document-service/transform/data.ts"],"sourcesContent":["import { createIdMap } from './id-map';\nimport { extractDataIds as extractDataRelationIds } from './relations/extract/data-ids';\nimport { transformDataIdsVisitor as transformRelationDataIds } from './relations/transform/data-ids';\nimport { setDefaultLocaleToRelations } from './relations/transform/default-locale';\n\n/**\n * Transforms input data, containing relation document ids, to entity ids.\n */\nexport const transformData = async (data: any, opts: any) => {\n  const idMap = createIdMap({ strapi });\n\n  // Assign default locales\n  const transformedData = await setDefaultLocaleToRelations(data, opts.uid);\n\n  // Extract any relation ids from the input\n  await extractDataRelationIds(idMap, transformedData, opts);\n\n  // Load any relation the extract methods found\n  await idMap.load();\n\n  // Transform any relation ids to entity ids\n  return transformRelationDataIds(idMap, transformedData, opts);\n};\n"],"names":["transformData","data","opts","idMap","createIdMap","strapi","transformedData","setDefaultLocaleToRelations","uid","extractDataRelationIds","load","transformRelationDataIds"],"mappings":";;;;;;;AAKA;;AAEC,IACM,MAAMA,aAAgB,GAAA,OAAOC,IAAWC,EAAAA,IAAAA,GAAAA;AAC7C,IAAA,MAAMC,UAAQC,iBAAY,CAAA;AAAEC,QAAAA;AAAO,KAAA,CAAA;;AAGnC,IAAA,MAAMC,eAAkB,GAAA,MAAMC,yCAA4BN,CAAAA,IAAAA,EAAMC,KAAKM,GAAG,CAAA;;IAGxE,MAAMC,sBAAAA,CAAuBN,SAAOG,eAAiBJ,EAAAA,IAAAA,CAAAA;;AAGrD,IAAA,MAAMC,QAAMO,IAAI,EAAA;;IAGhB,OAAOC,iCAAAA,CAAyBR,SAAOG,eAAiBJ,EAAAA,IAAAA,CAAAA;AAC1D;;;;"}