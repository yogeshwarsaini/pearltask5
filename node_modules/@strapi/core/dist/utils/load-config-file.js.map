{"version":3,"file":"load-config-file.js","sources":["../../src/utils/load-config-file.ts"],"sourcesContent":["import path from 'path';\nimport fs from 'fs';\nimport { env, importDefault } from '@strapi/utils';\n\nconst loadJsFile = (file: string) => {\n  try {\n    const jsModule = importDefault(file);\n\n    // call if function\n    if (typeof jsModule === 'function') {\n      return jsModule({ env });\n    }\n\n    return jsModule;\n  } catch (error) {\n    if (error instanceof Error) {\n      throw new Error(`Could not load js config file ${file}: ${error.message}`);\n    }\n\n    throw new Error('Unknown error');\n  }\n};\n\nconst loadJSONFile = (file: string) => {\n  try {\n    return JSON.parse(fs.readFileSync(file).toString());\n  } catch (error) {\n    if (error instanceof Error) {\n      throw new Error(`Could not load json config file ${file}: ${error.message}`);\n    }\n\n    throw new Error('Unknown error');\n  }\n};\n\nexport const loadConfigFile = (file: string) => {\n  const ext = path.extname(file);\n\n  switch (ext) {\n    case '.js':\n      return loadJsFile(file);\n    case '.json':\n      return loadJSONFile(file);\n    default:\n      return {};\n  }\n};\n"],"names":["loadJsFile","file","jsModule","importDefault","env","error","Error","message","loadJSONFile","JSON","parse","fs","readFileSync","toString","loadConfigFile","ext","path","extname"],"mappings":";;;;;;AAIA,MAAMA,aAAa,CAACC,IAAAA,GAAAA;IAClB,IAAI;AACF,QAAA,MAAMC,WAAWC,yBAAcF,CAAAA,IAAAA,CAAAA;;QAG/B,IAAI,OAAOC,aAAa,UAAY,EAAA;AAClC,YAAA,OAAOA,QAAS,CAAA;AAAEE,qBAAAA;AAAI,aAAA,CAAA;AACxB;QAEA,OAAOF,QAAAA;AACT,KAAA,CAAE,OAAOG,KAAO,EAAA;AACd,QAAA,IAAIA,iBAAiBC,KAAO,EAAA;YAC1B,MAAM,IAAIA,KAAM,CAAA,CAAC,8BAA8B,EAAEL,IAAK,CAAA,EAAE,EAAEI,KAAAA,CAAME,OAAO,CAAC,CAAC,CAAA;AAC3E;AAEA,QAAA,MAAM,IAAID,KAAM,CAAA,eAAA,CAAA;AAClB;AACF,CAAA;AAEA,MAAME,eAAe,CAACP,IAAAA,GAAAA;IACpB,IAAI;AACF,QAAA,OAAOQ,KAAKC,KAAK,CAACC,GAAGC,YAAY,CAACX,MAAMY,QAAQ,EAAA,CAAA;AAClD,KAAA,CAAE,OAAOR,KAAO,EAAA;AACd,QAAA,IAAIA,iBAAiBC,KAAO,EAAA;YAC1B,MAAM,IAAIA,KAAM,CAAA,CAAC,gCAAgC,EAAEL,IAAK,CAAA,EAAE,EAAEI,KAAAA,CAAME,OAAO,CAAC,CAAC,CAAA;AAC7E;AAEA,QAAA,MAAM,IAAID,KAAM,CAAA,eAAA,CAAA;AAClB;AACF,CAAA;AAEO,MAAMQ,iBAAiB,CAACb,IAAAA,GAAAA;IAC7B,MAAMc,GAAAA,GAAMC,IAAKC,CAAAA,OAAO,CAAChB,IAAAA,CAAAA;IAEzB,OAAQc,GAAAA;QACN,KAAK,KAAA;AACH,YAAA,OAAOf,UAAWC,CAAAA,IAAAA,CAAAA;QACpB,KAAK,OAAA;AACH,YAAA,OAAOO,YAAaP,CAAAA,IAAAA,CAAAA;AACtB,QAAA;AACE,YAAA,OAAO,EAAC;AACZ;AACF;;;;"}