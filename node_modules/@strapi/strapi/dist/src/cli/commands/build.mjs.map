{"version":3,"file":"build.mjs","sources":["../../../../src/cli/commands/build.ts"],"sourcesContent":["import { createCommand } from 'commander';\nimport type { StrapiCommand } from '../types';\n\nimport { build as nodeBuild, BuildOptions } from '../../node/build';\nimport { handleUnexpectedError } from '../../node/core/errors';\n\ntype BuildCLIOptions = BuildOptions;\n\nconst action = async (options: BuildCLIOptions) => {\n  try {\n    if (options.bundler === 'webpack') {\n      options.logger.warn(\n        '[@strapi/strapi]: Using webpack as a bundler is deprecated. You should migrate to vite.'\n      );\n    }\n\n    await nodeBuild(options);\n  } catch (err) {\n    handleUnexpectedError(err);\n  }\n};\n\n/**\n * `$ strapi build`\n */\nconst command: StrapiCommand = ({ ctx }) => {\n  return createCommand('build')\n    .option('--bundler [bundler]', 'Bundler to use (webpack or vite)', 'vite')\n    .option('-d, --debug', 'Enable debugging mode with verbose logs', false)\n    .option('--minify', 'Minify the output', true)\n    .option('--silent', \"Don't log anything\", false)\n    .option('--sourcemap', 'Produce sourcemaps', false)\n    .option('--stats', 'Print build statistics to the console', false)\n    .description('Build the strapi admin app')\n    .action(async (options: BuildCLIOptions) => {\n      return action({ ...options, ...ctx });\n    });\n};\n\nexport { command };\n"],"names":["action","options","bundler","logger","warn","nodeBuild","err","handleUnexpectedError","command","ctx","createCommand","option","description"],"mappings":";;;;AAQA,MAAMA,SAAS,OAAOC,OAAAA,GAAAA;IACpB,IAAI;QACF,IAAIA,OAAAA,CAAQC,OAAO,KAAK,SAAW,EAAA;YACjCD,OAAQE,CAAAA,MAAM,CAACC,IAAI,CACjB,yFAAA,CAAA;AAEJ;AAEA,QAAA,MAAMC,KAAUJ,CAAAA,OAAAA,CAAAA;AAClB,KAAA,CAAE,OAAOK,GAAK,EAAA;QACZC,qBAAsBD,CAAAA,GAAAA,CAAAA;AACxB;AACF,CAAA;AAEA;;AAEC,IACKE,MAAAA,OAAAA,GAAyB,CAAC,EAAEC,GAAG,EAAE,GAAA;AACrC,IAAA,OAAOC,cAAc,OAClBC,CAAAA,CAAAA,MAAM,CAAC,qBAAA,EAAuB,oCAAoC,MAClEA,CAAAA,CAAAA,MAAM,CAAC,aAAA,EAAe,2CAA2C,KACjEA,CAAAA,CAAAA,MAAM,CAAC,UAAA,EAAY,qBAAqB,IACxCA,CAAAA,CAAAA,MAAM,CAAC,UAAA,EAAY,sBAAsB,KACzCA,CAAAA,CAAAA,MAAM,CAAC,aAAA,EAAe,sBAAsB,KAC5CA,CAAAA,CAAAA,MAAM,CAAC,SAAA,EAAW,yCAAyC,KAC3DC,CAAAA,CAAAA,WAAW,CAAC,4BACZZ,CAAAA,CAAAA,MAAM,CAAC,OAAOC,OAAAA,GAAAA;AACb,QAAA,OAAOD,MAAO,CAAA;AAAE,YAAA,GAAGC,OAAO;AAAE,YAAA,GAAGQ;AAAI,SAAA,CAAA;AACrC,KAAA,CAAA;AACJ;;;;"}