{"version":3,"file":"monorepo.mjs","sources":["../../../../src/node/core/monorepo.ts"],"sourcesContent":["import path from 'path';\nimport readPkgUp from 'read-pkg-up';\n\ninterface StrapiMonorepo {\n  path: string;\n}\n\n/**\n * Load information about the strapi CMS monorepo (if applicable)\n *\n * @internal\n */\nasync function loadStrapiMonorepo(cwd: string): Promise<StrapiMonorepo | undefined> {\n  let p = cwd;\n\n  while (p !== '/') {\n    const readResult = await readPkgUp({ cwd: p });\n\n    if (!readResult) {\n      return undefined;\n    }\n\n    if (readResult.packageJson.isStrapiMonorepo) {\n      return { path: path.dirname(readResult.path) };\n    }\n\n    p = path.dirname(path.dirname(readResult.path));\n  }\n\n  return undefined;\n}\n\nexport { loadStrapiMonorepo };\nexport type { StrapiMonorepo };\n"],"names":["loadStrapiMonorepo","cwd","p","readResult","readPkgUp","undefined","packageJson","isStrapiMonorepo","path","dirname"],"mappings":";;;AAOA;;;;IAKA,eAAeA,mBAAmBC,GAAW,EAAA;AAC3C,IAAA,IAAIC,CAAID,GAAAA,GAAAA;AAER,IAAA,MAAOC,MAAM,GAAK,CAAA;QAChB,MAAMC,UAAAA,GAAa,MAAMC,SAAU,CAAA;YAAEH,GAAKC,EAAAA;AAAE,SAAA,CAAA;AAE5C,QAAA,IAAI,CAACC,UAAY,EAAA;YACf,OAAOE,SAAAA;AACT;AAEA,QAAA,IAAIF,UAAWG,CAAAA,WAAW,CAACC,gBAAgB,EAAE;YAC3C,OAAO;AAAEC,gBAAAA,IAAAA,EAAMA,IAAKC,CAAAA,OAAO,CAACN,UAAAA,CAAWK,IAAI;AAAE,aAAA;AAC/C;AAEAN,QAAAA,CAAAA,GAAIM,KAAKC,OAAO,CAACD,KAAKC,OAAO,CAACN,WAAWK,IAAI,CAAA,CAAA;AAC/C;IAEA,OAAOH,SAAAA;AACT;;;;"}