{"version":3,"file":"component-categories.js","sources":["../../../server/src/controllers/component-categories.ts"],"sourcesContent":["import type { Context } from 'koa';\nimport { getService } from '../utils';\nimport validateComponentCategory from './validation/component-category';\n\nexport default {\n  async editCategory(ctx: Context) {\n    const body = ctx.request.body as any;\n\n    try {\n      await validateComponentCategory(body);\n    } catch (error) {\n      return ctx.send({ error }, 400);\n    }\n\n    const { name } = ctx.params;\n\n    strapi.reload.isWatching = false;\n\n    const componentCategoryService = getService('component-categories');\n\n    const newName = await componentCategoryService.editCategory(name, body);\n\n    setImmediate(() => strapi.reload());\n\n    ctx.send({ name: newName });\n  },\n\n  async deleteCategory(ctx: Context) {\n    const { name } = ctx.params;\n\n    strapi.reload.isWatching = false;\n\n    const componentCategoryService = getService('component-categories');\n\n    await componentCategoryService.deleteCategory(name);\n\n    setImmediate(() => strapi.reload());\n\n    ctx.send({ name });\n  },\n};\n"],"names":["editCategory","ctx","body","request","validateComponentCategory","error","send","name","params","strapi","reload","isWatching","componentCategoryService","getService","newName","setImmediate","deleteCategory"],"mappings":";;;;;AAIA,0BAAe;AACb,IAAA,MAAMA,cAAaC,GAAY,EAAA;AAC7B,QAAA,MAAMC,IAAOD,GAAAA,GAAAA,CAAIE,OAAO,CAACD,IAAI;QAE7B,IAAI;AACF,YAAA,MAAME,iBAA0BF,CAAAA,IAAAA,CAAAA;AAClC,SAAA,CAAE,OAAOG,KAAO,EAAA;YACd,OAAOJ,GAAAA,CAAIK,IAAI,CAAC;AAAED,gBAAAA;aAAS,EAAA,GAAA,CAAA;AAC7B;AAEA,QAAA,MAAM,EAAEE,IAAI,EAAE,GAAGN,IAAIO,MAAM;QAE3BC,MAAOC,CAAAA,MAAM,CAACC,UAAU,GAAG,KAAA;AAE3B,QAAA,MAAMC,2BAA2BC,gBAAW,CAAA,sBAAA,CAAA;AAE5C,QAAA,MAAMC,OAAU,GAAA,MAAMF,wBAAyBZ,CAAAA,YAAY,CAACO,IAAML,EAAAA,IAAAA,CAAAA;QAElEa,YAAa,CAAA,IAAMN,OAAOC,MAAM,EAAA,CAAA;AAEhCT,QAAAA,GAAAA,CAAIK,IAAI,CAAC;YAAEC,IAAMO,EAAAA;AAAQ,SAAA,CAAA;AAC3B,KAAA;AAEA,IAAA,MAAME,gBAAef,GAAY,EAAA;AAC/B,QAAA,MAAM,EAAEM,IAAI,EAAE,GAAGN,IAAIO,MAAM;QAE3BC,MAAOC,CAAAA,MAAM,CAACC,UAAU,GAAG,KAAA;AAE3B,QAAA,MAAMC,2BAA2BC,gBAAW,CAAA,sBAAA,CAAA;QAE5C,MAAMD,wBAAAA,CAAyBI,cAAc,CAACT,IAAAA,CAAAA;QAE9CQ,YAAa,CAAA,IAAMN,OAAOC,MAAM,EAAA,CAAA;AAEhCT,QAAAA,GAAAA,CAAIK,IAAI,CAAC;AAAEC,YAAAA;AAAK,SAAA,CAAA;AAClB;AACF,CAAE;;;;"}