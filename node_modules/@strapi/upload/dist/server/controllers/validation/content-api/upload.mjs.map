{"version":3,"file":"upload.mjs","sources":["../../../../../server/src/controllers/validation/content-api/upload.ts"],"sourcesContent":["import { yup, validateYupSchema } from '@strapi/utils';\n\nconst fileInfoSchema = yup\n  .object({\n    name: yup.string().nullable(),\n    alternativeText: yup.string().nullable(),\n    caption: yup.string().nullable(),\n  })\n  .noUnknown();\n\nconst uploadSchema = yup.object({\n  fileInfo: fileInfoSchema,\n});\n\nconst multiUploadSchema = yup.object({\n  fileInfo: yup.array().of(fileInfoSchema),\n});\n\nconst validateUploadBody = (data = {}, isMulti = false) => {\n  const schema = isMulti ? multiUploadSchema : uploadSchema;\n\n  return validateYupSchema(schema, { strict: false })(data);\n};\n\nexport { validateUploadBody };\n\nexport type UploadBody =\n  | yup.InferType<typeof uploadSchema>\n  | yup.InferType<typeof multiUploadSchema>;\n"],"names":["fileInfoSchema","yup","object","name","string","nullable","alternativeText","caption","noUnknown","uploadSchema","fileInfo","multiUploadSchema","array","of","validateUploadBody","data","isMulti","schema","validateYupSchema","strict"],"mappings":";;AAEA,MAAMA,cAAAA,GAAiBC,GACpBC,CAAAA,MAAM,CAAC;IACNC,IAAMF,EAAAA,GAAAA,CAAIG,MAAM,EAAA,CAAGC,QAAQ,EAAA;IAC3BC,eAAiBL,EAAAA,GAAAA,CAAIG,MAAM,EAAA,CAAGC,QAAQ,EAAA;IACtCE,OAASN,EAAAA,GAAAA,CAAIG,MAAM,EAAA,CAAGC,QAAQ;AAChC,CAAA,CAAA,CACCG,SAAS,EAAA;AAEZ,MAAMC,YAAAA,GAAeR,GAAIC,CAAAA,MAAM,CAAC;IAC9BQ,QAAUV,EAAAA;AACZ,CAAA,CAAA;AAEA,MAAMW,iBAAAA,GAAoBV,GAAIC,CAAAA,MAAM,CAAC;AACnCQ,IAAAA,QAAAA,EAAUT,GAAIW,CAAAA,KAAK,EAAGC,CAAAA,EAAE,CAACb,cAAAA;AAC3B,CAAA,CAAA;AAEA,MAAMc,qBAAqB,CAACC,IAAAA,GAAO,EAAE,EAAEC,UAAU,KAAK,GAAA;IACpD,MAAMC,MAAAA,GAASD,UAAUL,iBAAoBF,GAAAA,YAAAA;AAE7C,IAAA,OAAOS,kBAAkBD,MAAQ,EAAA;QAAEE,MAAQ,EAAA;KAASJ,CAAAA,CAAAA,IAAAA,CAAAA;AACtD;;;;"}