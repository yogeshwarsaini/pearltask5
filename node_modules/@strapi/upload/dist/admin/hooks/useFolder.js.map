{"version":3,"file":"useFolder.js","sources":["../../../admin/src/hooks/useFolder.ts"],"sourcesContent":["import { useNotification, useFetchClient } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\nimport { useQuery } from 'react-query';\n\nimport { GetFolder } from '../../../shared/contracts/folders';\nimport { pluginId } from '../pluginId';\nimport { getTrad } from '../utils';\n\nexport const useFolder = (id: number | null | undefined, { enabled = true } = {}) => {\n  const { toggleNotification } = useNotification();\n  const { get } = useFetchClient();\n  const { formatMessage } = useIntl();\n\n  const { data, error, isLoading } = useQuery<\n    GetFolder.Response['data'],\n    GetFolder.Response['error']\n  >(\n    [pluginId, 'folder', id],\n    async () => {\n      const {\n        data: { data },\n      } = await get(`/upload/folders/${id}`, {\n        params: {\n          populate: {\n            parent: {\n              populate: {\n                parent: '*',\n              },\n            },\n          },\n        },\n      });\n\n      return data;\n    },\n    {\n      retry: false,\n      enabled,\n      staleTime: 0,\n      cacheTime: 0,\n      onError() {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: getTrad('notification.warning.404'),\n            defaultMessage: 'Not found',\n          }),\n        });\n      },\n    }\n  );\n\n  return { data, error, isLoading };\n};\n"],"names":["useFolder","id","enabled","toggleNotification","useNotification","get","useFetchClient","formatMessage","useIntl","data","error","isLoading","useQuery","pluginId","params","populate","parent","retry","staleTime","cacheTime","onError","type","message","getTrad","defaultMessage"],"mappings":";;;;;;;;;;;;;AAQO,MAAMA,SAAY,GAAA,CAACC,EAA+B,EAAA,EAAEC,UAAU,IAAI,EAAE,GAAG,EAAE,GAAA;IAC9E,MAAM,EAAEC,kBAAkB,EAAE,GAAGC,2BAAAA,EAAAA;IAC/B,MAAM,EAAEC,GAAG,EAAE,GAAGC,0BAAAA,EAAAA;IAChB,MAAM,EAAEC,aAAa,EAAE,GAAGC,iBAAAA,EAAAA;IAE1B,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,SAAS,EAAE,GAAGC,mBAIjC,CAAA;AAACC,QAAAA,iBAAAA;AAAU,QAAA,QAAA;AAAUZ,QAAAA;KAAG,EACxB,UAAA;AACE,QAAA,MAAM,EACJQ,IAAAA,EAAM,EAAEA,IAAI,EAAE,EACf,GAAG,MAAMJ,GAAAA,CAAI,CAAC,gBAAgB,EAAEJ,EAAAA,CAAG,CAAC,EAAE;YACrCa,MAAQ,EAAA;gBACNC,QAAU,EAAA;oBACRC,MAAQ,EAAA;wBACND,QAAU,EAAA;4BACRC,MAAQ,EAAA;AACV;AACF;AACF;AACF;AACF,SAAA,CAAA;QAEA,OAAOP,IAAAA;KAET,EAAA;QACEQ,KAAO,EAAA,KAAA;AACPf,QAAAA,OAAAA;QACAgB,SAAW,EAAA,CAAA;QACXC,SAAW,EAAA,CAAA;AACXC,QAAAA,OAAAA,CAAAA,GAAAA;YACEjB,kBAAmB,CAAA;gBACjBkB,IAAM,EAAA,QAAA;AACNC,gBAAAA,OAAAA,EAASf,aAAc,CAAA;AACrBN,oBAAAA,EAAAA,EAAIsB,eAAQ,CAAA,0BAAA,CAAA;oBACZC,cAAgB,EAAA;AAClB,iBAAA;AACF,aAAA,CAAA;AACF;AACF,KAAA,CAAA;IAGF,OAAO;AAAEf,QAAAA,IAAAA;AAAMC,QAAAA,KAAAA;AAAOC,QAAAA;AAAU,KAAA;AAClC;;;;"}